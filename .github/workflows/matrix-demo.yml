name: Matrix Demo

on:
    workflow_dispatch:
#   push:
#     branches:
#       - main
#   pull_request:

jobs:
  test:
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      max-parallel: 3
      matrix:
        os: [ubuntu-latest, windows-latest, macos-latest]
        node: [14, 16, 18]
        # Exclude some combinations
        exclude:
          - os: windows-latest
            node: 16
        # Include custom combination not in default matrix
        include:
          - os: ubuntu-latest
            node: 20
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node }}

      - name: Display environment info
        run: |
          echo "Running on OS: ${{ matrix.os }}"
          echo "Node.js version: ${{ matrix.node }}"
          node -v
          npm -v